<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<html>
<head>
    <title>Job Matrix - GitHub Actions by Example</title>
    <meta name="description" content="GitHub Actions by Example is an introduction to the service through annotated examples."/>
    <meta property="og:title" content="Job Matrix - GitHub Actions by Example">
    <meta property="og:description" content="GitHub Actions by Example is an introduction to the service through annotated examples.">
    <meta property="og:url" content="https://www.actionsbyexample.com/">
    <meta property="og:site_name" content="GitHub Actions by Example">
    <meta name="twitter:title" content="Job Matrix - GitHub Actions by Example">
    <meta name="twitter:description" content="GitHub Actions by Example is an introduction to the service through annotated examples.">
    <meta name="twitter:creator" content="@macint0shpie">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville&family=Roboto+Mono&display=swap" rel="stylesheet">
    <link href="default.css" rel="stylesheet">
    <link href="site.css" rel="stylesheet">
</head>
<body>
<div class="main_container">
<div class="container">
    <h1><a href="index.html">GitHub Actions by Example</a>: Job Matrix</h1>
    <table>
        <colgroup>
            <col span="1" style="width: 50%;">
            <col span="1" style="width: 50%;">
        </colgroup>

        <tbody>
            <tr>
                <td rowspan="1" class="docs"><p>You can run multiple jobs with different configurations by using a job <code>matrix</code>. Note that jobs defined by a <code>matrix</code> run in parallel by default.</p>
</td>
                <td class="code  empty">
                  <pre tabindex="0" class="chroma"><code></code></pre></td>
            </tr>
            <tr>
                <td rowspan="1" class="docs"></td>
                <td class="code ">
                  <svg version="1.1" id="copy_icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100.56 122.88" style="enable-background:new 0 0 100.56 122.88" xml:space="preserve"><g><path d="M72.15,112.2L90.4,93H72.15V112.2L72.15,112.2z M81.75,9.2c0,1.69-1.37,3.05-3.05,3.05c-1.69,0-3.05-1.37-3.05-3.05V6.11 H6.11v92.24h3.01c1.69,0,3.05,1.37,3.05,3.05c0,1.69-1.37,3.05-3.05,3.05H5.48c-1.51,0-2.88-0.61-3.87-1.61l0.01-0.01 c-1-1-1.61-2.37-1.61-3.87V5.48C0,3.97,0.61,2.6,1.61,1.61C2.6,0.61,3.97,0,5.48,0h70.79c1.5,0,2.87,0.62,3.86,1.61l0,0l0.01,0.01 c0.99,0.99,1.61,2.36,1.61,3.86V9.2L81.75,9.2z M100.56,90.55c0,1.4-0.94,2.58-2.22,2.94l-26.88,28.27 c-0.56,0.68-1.41,1.11-2.36,1.11c-0.06,0-0.12,0-0.19-0.01c-0.06,0-0.12,0.01-0.18,0.01H24.29c-1.51,0-2.88-0.61-3.87-1.61 l0.01-0.01l-0.01-0.01c-0.99-0.99-1.61-2.36-1.61-3.86v-93.5c0-1.51,0.62-2.88,1.61-3.87l0.01,0.01c1-0.99,2.37-1.61,3.86-1.61 h70.79c1.5,0,2.87,0.62,3.86,1.61l0,0l0.01,0.01c0.99,0.99,1.61,2.36,1.61,3.86V90.55L100.56,90.55z M94.45,86.9V24.54H24.92v92.24 h41.13V89.95c0-1.69,1.37-3.05,3.05-3.05H94.45L94.45,86.9z"></path></g></svg>
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">job-matrix</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="1" class="docs"></td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w"></span><span class="nt">on</span><span class="p">:</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="1" class="docs"></td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w"></span><span class="w">  </span><span class="nt">push</span><span class="p">:</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="1" class="docs"></td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w"></span><span class="nt">jobs</span><span class="p">:</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="1" class="docs"></td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w"></span><span class="w">  </span><span class="nt">my-job</span><span class="p">:</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="1" class="docs"></td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w"></span><span class="w">    </span><span class="nt">strategy</span><span class="p">:</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="3" class="docs"><p>The <code>matrix</code> keyword is how you define a job matrix. Each user-defined key is a matrix parameter, here we&rsquo;ve defined two: <code>os</code> and <code>node</code>. The list of possible values for each parameter are used in a <a href="https://en.wikipedia.org/wiki/Cartesian_product">cartesian product</a> to create jobs. This section defines a 2 x 3 matrix of 6 jobs, each with a different combination of <code>os</code> and <code>node</code>.</p>
</td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w"></span><span class="w">      </span><span class="nt">matrix</span><span class="p">:</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w"></span><span class="w">        </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">ubuntu-16.04, ubuntu-18.04]</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w">        </span><span class="nt">node</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">]</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="4" class="docs"><p>The <code>exclude</code> keyword prevents jobs with specific configurations from running.</p>
</td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w">        </span><span class="nt">exclude</span><span class="p">:</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w"></span><span class="w">          </span>-<span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w">            </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="l">ubuntu-16.04</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w">            </span><span class="nt">node</span><span class="p">:</span><span class="w"> </span><span class="m">6</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="4" class="docs"><p><code>include</code> allows you to add new jobs to the <code>matrix</code>. Note that the <code>include</code> rules always evaluated after the <code>exclude</code> rules.</p>
</td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w">        </span><span class="nt">include</span><span class="p">:</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w"></span><span class="w">          </span>-<span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w">            </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="l">macos-latest</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w">            </span><span class="nt">node</span><span class="p">:</span><span class="w"> </span><span class="m">10</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="1" class="docs"><p>Use <code>matrix</code> parameters to configure jobs. <a href="index.html">Context expressions</a> are used to insert the parameter value. This example uses the <code>os</code> parameter to set the operating system of the job.</p>
</td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l">${{ matrix.os }}</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="1" class="docs"></td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="1" class="docs"></td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w"></span><span class="w">      </span>-<span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="1" class="docs"></td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/setup-node@2</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="1" class="docs"></td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="1" class="docs"><p>Setup node based on the matrix parameter <code>node</code></p>
</td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w"></span><span class="w">          </span><span class="nt">node-version</span><span class="p">:</span><span class="w"> </span><span class="l">${{ matrix.node }}</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="1" class="docs"></td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l">npm install</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
            <tr>
                <td rowspan="1" class="docs"></td>
                <td class="code ">
                  <pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l">npm test</span><span class="w">
</span></span></span></code></pre></td>
            </tr>
        <tbody>
    </table>
    
    <p>
        Next example: <a href="outputs.html">Outputs</a>
    </p>
    
</div>
<p class="footer">By <a href="https://macintoshpie.github.io">Ted Summer</a> | <a href="https://github.com/macintoshpie/ghactionsbyexample">Source</a> | Inspired by <a href="https://gobyexample.com">Go by Example</a></p>
</div>
<script>
    const yamlBody = `name: job-matrix
on:
  push:
jobs:
  my-job:
    strategy:
      matrix:
        os: [ubuntu-16.04, ubuntu-18.04]
        node: [6, 8, 10]
        exclude:
          -
            os: ubuntu-16.04
            node: 6
        include:
          -
            os: macos-latest
            node: 10
    runs-on: \${{ matrix.os }}
    steps:
      -
        uses: actions/setup-node@2
        with:
          node-version: \${{ matrix.node }}
      - run: npm install
      - run: npm test
`

    function copy() {
        var body = document.getElementsByTagName('body')[0];
        newTextArea = document.createElement('textarea')
        body.appendChild(newTextArea)
        newTextArea.value = yamlBody
        newTextArea.select()

        try {
            var successful = document.execCommand('copy');
            var msg = successful ? 'successful' : 'unsuccessful';
            console.log('Copy command was ' + msg);
        } catch(err) {
            console.log('Oops, unable to copy: ', err);
        }

        body.removeChild(newTextArea)
    }

    document.querySelector("#copy_icon").addEventListener("click", copy);
</script>
</body>
</html>
